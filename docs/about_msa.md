---
layout: default
title:  "requirements.txt 에 대하여"
date:   2023-10-19 18:58:00 +0900
parent: LEARN_LOG
---

# MSA 이해

## 소개
- MSA 정의
  
  <p> 마이크로서비스 아키텍처(Microservice Architecture) 는 소프트웨어를 독립적인 서비스로 분해하여 개발하고 배포하는 스타일이다. 이러한 각 서비스는 특정 비즈니스 기능을 수행하며, 서로 간에 결합, 통신하여 전체 시스템을 구성한다.</p>

- 현대 소프트웨어 개발에서의 중요성과 관련성

    - MSA 는 각 서비스를 독립적으로 확장할 수 있기 때문에 효율적인 자원 사용이 가능하다
    - 더 빠르게 개발하고 새로운 기능을 배포할 수 있다
    - 각 서비스가 필요에 따라 다른 기술을 사용할 수 있으므로 최신 기술의 도입이나 서비스에 따른 적합한 기술을 적용할 수 있다
    - 다양한 비즈니스 요구사항에 대응할 수 있다

<br>

## 고려해야할 사항
1. **복잡성**
   - 서비스 발견과 통신
   - 오케스트레이션과 코레오그래피
   - 해결 방법 : Service Discovery(Kubernetes, AWS ELB), Service Mesh(Istio,Linkerd, AWS App Mesh) 사용

2. **분산 데이터 관리**
   - 일관성, 가용성 및 분할 내성 (CAP 이론)
   - 최종 일관성
   - 해결 방법 : CAP 이론을 고려하여 데이터 조절, CQRS패턴 사용

3. **테스트와 디버깅**
   - 단위 테스트
   - 통합 테스트
   - 서비스 간 디버깅

4. **배포와 운영**
   - 지속적 통합/지속적 배포 (CI/CD)
   - 모니터링과 관측

5. **보안**
   - 네트워크 보안
   - 권한 및 인증
   - 해결책 : SSL/TLS 를 통한 암호화 활용, OAuth나 JWT 사용

<br>

## 설계 원칙
1. **단일 책임 원칙 (SRP)**
   - Microservice 는 독립적인 단위의 서비스로 특정한 업무나 비즈니스 기능을 수행한다.
   - Microservice 에 너무 많은 기능을 포함하지 않도록 한다. 작고 간결한 기능을 유지하려고 노력한다.

2. **느슨한 결합**
   - 통신 프로토콜을 정한다 EX. HTTP, gRPC
   - 서비스 간의 의사소통을 명확하게 한다. 서비스 계약을 지킨다.

3. **자율적인 배포**
   - 서비스는 독립적 배포가 가능하도록 한다.
   - 컨테이너화 및 오케스트레이션 (예: Docker, Kubernetes) 도구를 사용한다.

4. **API 게이트웨이와 서비스 발견**
   - API 게이트웨이를 통해 클라이언트가 서비스에 접근할 수 있도록 한다.
   - 서비스 레지스트리를 사용한다.

5. **복원력과 오류 허용성**
   - Circuit breakers 를 사용하여 실패, 응답 지연 등의 상황에 적절히 대응할 수 있도록 한다.
   - Retry Mechanism을 도입한다.

<br>

## MSA 구현
1. **도메인 주도 설계 (DDD)**
   - 컨텍스트의 경계
   - 집합과 엔터티

1. **서비스 통신**
   - 동기 vs. 비동기 통신
   - REST, gRPC, 메시지 큐

1. **데이터 관리**
   - 서비스별 데이터베이스
   - 이벤트 소싱과 CQRS

1. **모니터링과 관측**
   - 지표, 로그 및 추적
   - 도구와 모범 사례

1. **보안 조치**
   - API 보안
   - 권한 및 접근 제어


<br>


